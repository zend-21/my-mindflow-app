// ì „ì²´í™”ë©´ ì±„íŒ…ë°© ì»´í¬ë„ŒíŠ¸
import { useState, useEffect, useRef, useMemo } from 'react';
import { createPortal } from 'react-dom';
import styled from 'styled-components';
import { ArrowLeft, Send, MoreVertical, Users, Smile, FileText, Settings, X, UserCog, UserPlus, Trash2, Mail, Copy, Shield } from 'lucide-react';
// ğŸ†• í†µí•© ì±„íŒ… ì„œë¹„ìŠ¤ (1:1 + ê·¸ë£¹)
import {
  sendMessage as sendUnifiedMessage,
  subscribeToMessages as subscribeToUnifiedMessages,
  markAsRead as markUnifiedAsRead,
  markAllMessagesAsRead as markAllUnifiedMessagesAsRead,
  enterChatRoom as enterUnifiedChatRoom,
  exitChatRoom as exitUnifiedChatRoom
} from '../../services/unifiedChatService';
// ê°œë³„ ì„œë¹„ìŠ¤ (ê·¸ë£¹ ê´€ë¦¬ ê¸°ëŠ¥ìš©)
import { subscribeToDMRoom } from '../../services/directMessageService';
import { acceptInvitation, rejectInvitation, inviteMembersToGroup, transferRoomOwnership, removeMemberFromGroup, deleteGroupChat, cancelInvitation, updateGroupRoomType, appointSubManager, updateGroupImage } from '../../services/groupChatService';
import { getMyFriends, getUserByWorkspaceCode } from '../../services/friendService';
import { getUserNickname } from '../../services/nicknameService';
import { isUserBlocked } from '../../services/userManagementService';
import { playChatMessageSound, notificationSettings } from '../../utils/notificationSounds';
import CollaborativeDocumentEditor from './CollaborativeDocumentEditor';
import SharedMemoSelectorModal from './SharedMemoSelectorModal';
import PermissionManagementModal from './PermissionManagementModal';
import AppointSubManagerModal from './AppointSubManagerModal';
import { db } from '../../firebase/config';
import { doc, onSnapshot, getDoc } from 'firebase/firestore';
import { getCurrentUserId, getCurrentUserData } from '../../utils/userStorage';
import { avatarList } from '../avatars/AvatarIcons';

// ì „ì²´í™”ë©´ ì»¨í…Œì´ë„ˆ
